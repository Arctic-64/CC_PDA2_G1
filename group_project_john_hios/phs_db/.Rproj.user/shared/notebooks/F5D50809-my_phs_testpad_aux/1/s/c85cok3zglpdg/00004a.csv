"0",""
"0","results_nhb <- tibble()"
"0",""
"0",""
"0","for (nhb_num in 2:15){"
"0","  "
"0",""
"0","  this_nhb <- beds_hbs_names[[nhb_num,1]]"
"0","  "
"0","  "
"0","  # Create a bootstrap sampling distribution (total_occupied_beds)"
"0","  set.seed(42)"
"0","  bootstrap_distn_tob <- beds_oos %>%"
"0","    select(total_occupied_beds, location) %>%"
"0","    filter(location == this_nhb) %>% "
"0","    specify(response = total_occupied_beds) %>%"
"0","    generate(reps = 10000, type = ""bootstrap"") %>%"
"0","    calculate(stat = ""mean"")"
"0","  "
"0","  bootstrap_distn_tob %>%"
"0","    visualise(binwidth = 10000)"
"0","  "
"0","  # Calculate a 99.9% CI for ``mean(total_occupied_beds)``, and visualise it on the distribution"
"0","  "
"0","  tob_ci999 <- bootstrap_distn_tob %>%"
"0","    get_ci(level = 0.999, type = ""percentile"")"
"0","  tob_ci999"
"0","  "
"0","  "
"0","  bootstrap_distn_tob %>%"
"0","    visualise(bins = 30) +"
"0","    shade_ci(endpoints = tob_ci999)"
"0","  "
"0","  "
"0","  ############################################4#######################"
"0","  "
"0","  "
"0","  # Create a bootstrap sampling distribution (average_available_staffed_beds)"
"0","  set.seed(42)"
"0","  bootstrap_distn_aasb <- beds_oos %>%"
"0","    select(average_available_staffed_beds, location) %>%"
"0","    filter(location == this_nhb) %>% "
"0","    specify(response = average_available_staffed_beds) %>%"
"0","    generate(reps = 10000, type = ""bootstrap"") %>%"
"0","    calculate(stat = ""mean"")"
"0","  "
"0","  bootstrap_distn_aasb %>%"
"0","    visualise(binwidth = 10000)"
"0","  "
"0","  # Calculate a 99.9% CI for ``mean(average_available_staffed_beds)``, and visualise it on the distribution"
"0","  "
"0","  aasb_ci999 <- bootstrap_distn_aasb %>%"
"0","    get_ci(level = 0.999, type = ""percentile"")"
"0","  aasb_ci999"
"0","  "
"0","  "
"0","  bootstrap_distn_aasb %>%"
"0","    visualise(bins = 30) +"
"0","    shade_ci(endpoints = aasb_ci999)"
"0","  "
"0","  "
"0","  ############################################4#######################"
"0","  "
"0","  "
"0","  # Create a bootstrap sampling distribution (average_occupied_beds)"
"0","  set.seed(42)"
"0","  bootstrap_distn_aob <- beds_oos %>%"
"0","    select(average_occupied_beds, location) %>%"
"0","    filter(location == this_nhb) %>% "
"0","    specify(response = average_occupied_beds) %>%"
"0","    generate(reps = 10000, type = ""bootstrap"") %>%"
"0","    calculate(stat = ""mean"")"
"0","  "
"0","  bootstrap_distn_aob %>%"
"0","    visualise(binwidth = 10000)"
"0","  "
"0","  # Calculate a 99.9% CI for ``mean(average_occupied_beds)``, and visualise it on the distribution"
"0","  "
"0","  aob_ci999 <- bootstrap_distn_aob %>%"
"0","    get_ci(level = 0.999, type = ""percentile"")"
"0","  aob_ci999"
"0","  "
"0","  "
"0","  bootstrap_distn_aob %>%"
"0","    visualise(bins = 30) +"
"0","    shade_ci(endpoints = aob_ci999)"
"0","  "
"0","  "
"0","  ############################################4#######################"
"0","  "
"0","  "
"0","  # Create a bootstrap sampling distribution (percentage_occupancy)"
"0","  set.seed(42)"
"0","  bootstrap_distn_po <- beds_oos %>%"
"0","    select(percentage_occupancy, location) %>%"
"0","    filter(location == this_nhb) %>% "
"0","    specify(response = percentage_occupancy) %>%"
"0","    generate(reps = 10000, type = ""bootstrap"") %>%"
"0","    calculate(stat = ""mean"")"
"0","  "
"0","  bootstrap_distn_po %>%"
"0","    visualise(binwidth = 10000)"
"0","  "
"0","  # Calculate a 99.9% CI for ``mean(percentage_occupancy)``, and visualise it on the distribution"
"0","  "
"0","  po_ci999 <- bootstrap_distn_po %>%"
"0","    get_ci(level = 0.999, type = ""percentile"")"
"0","  po_ci999"
"0","  "
"0","  "
"0","  bootstrap_distn_po %>%"
"0","    visualise(bins = 30) +"
"0","    shade_ci(endpoints = po_ci999)"
"0",""
"0",""
"0","# Gather all confidence intervals in one tibble"
"0",""
"0",""
"0","this_result <- tibble("
"0","  beds_hbs_names[nhb_num,], "
"0","  lower_tob_ci999 = tob_ci999 %>%"
"0","    pull(lower_ci),"
"0","  upper_tob_ci999 = tob_ci999 %>%"
"0","    pull(upper_ci), "
"0","  lower_aasb_ci999 = aasb_ci999 %>%"
"0","    pull(lower_ci),"
"0","  upper_aasb_ci999 = aasb_ci999 %>%"
"0","    pull(upper_ci), "
"0","  lower_aob_ci999 = aob_ci999 %>%"
"0","    pull(lower_ci),"
"0","  upper_aob_ci999 = aob_ci999 %>%"
"0","    pull(upper_ci), "
"0","  lower_po_ci999 = po_ci999 %>%"
"0","    pull(lower_ci),"
"0","  upper_po_ci999 = po_ci999 %>%"
"0","    pull(upper_ci)"
"0","  )"
"0",""
"0",""
"0","# add this_result to growing tibble of results"
"0","  results_nhb <- results_nhb %>%"
"0","    bind_rows(this_result)"
"0","}"
"0",""
